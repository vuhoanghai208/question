<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trắc Nghiệm Bài 4</title>
    <style>
        /* CSS cho giao diện */
        body {
            font-family: Arial, sans-serif;
            background-color: black;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }
        .quiz-container {
            background-color: #ffffff;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 800px;
            overflow: hidden;
        }
        #quiz-header {
            padding: 20px 30px;
            background-color: #007bff;
            color: white;
            font-size: 1.2em;
            font-weight: bold;
        }
        #question-container {
            padding: 30px;
        }
        #question-text {
            font-size: 1.25em;
            font-weight: bold;
            margin-bottom: 25px;
            line-height: 1.4;
        }
        .option {
            background-color: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px 20px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1em;
        }
        .option:hover {
            background-color: #e9ecef;
        }
        #feedback {
            margin-top: 15px;
            font-size: 1.1em;
            font-weight: bold;
            height: 25px; /* Đặt chiều cao cố định để không bị giật layout */
        }

        /* --- LỚP CSS ĐỘNG (do JavaScript thêm vào) --- */
        
        /* Khi chọn ĐÚNG: Màu xanh */
        .option.correct {
            background-color: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
            font-weight: bold;
        }

        /* Khi chọn SAI: Màu đỏ */
        .option.incorrect {
            background-color: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="quiz-container">
        <div id="quiz-header">
            <span id="progress-text">Đang tải...</span>
        </div>

        <div id="question-container">
            <p id="question-text">Câu hỏi sẽ hiển thị ở đây</p>
            <div id="options-container">
                </div>
            <div id="feedback"></div>
        </div>
        
        <div id="completion-screen" style="display: none; padding: 30px; text-align: center;">
            <h2 style="color: #007bff;">Bạn đã hoàn thành!</h2>
            <p style="font-size: 1.2em;">Bạn đã trả lời xong 20 câu hỏi.</p>
            <button id="restart-btn" style="background-color: #007bff; color: white; border: none; padding: 12px 25px; font-size: 1em; border-radius: 5px; cursor: pointer; margin-top: 20px;">
                Làm lại từ đầu
            </button>
        </div>
    </div>

    <script>
        // --- JAVASCRIPT ĐỂ XỬ LÝ QUIZ ---

        // 1. DỮ LIỆU CÂU HỎI (Trích xuất từ file của bạn)
        const quizData = [
            { question: "Một trong những nội dung kẻ thù thực hiện chống phá ta về chính trị:", options: ["Phá vỡ khối đại đoàn kết toàn dân của các tổ chức chính trị.", "Chia rẽ nội bộ, kích động gây rối loạn các tổ chức trong xã hội.", "Cô lập Đảng Cộng sản Việt Nam, Nhà nước XHCN với quân đội và nhân dân.", "Kích động đòi thực hiện chế độ \"đa nguyên chính trị, đa Đảng đối lập\"."], answer: 3 },
            { question: "Bạo loạn lật đổ gồm có những hình thức nào:", options: ["Bạo loạn chính trị kết hợp với đấu tranh vũ trang và gây rối.", "Bạo loạn vũ trang kết hợp với bạo loạn chính trị và gây rối.", "Bạo loạn chính trị, bạo loạn vũ trang, kết hợp bạo loạn chính trị với vũ trang.", "Bạo loạn chính trị kết hợp với gây rối và vũ trang."], answer: 2 },
            { question: "Một trong những nội dung chống phá về chính trị trong chiến lược \"Diễn biến hoà bình\"?", options: ["Chia rẽ mối quan hệ giữa Đảng với nhân dân và khối đại đoàn kết toàn dân tộc", "Phủ định Chủ nghĩa Mác - Lênin, tư tưởng Hồ Chí Minh và đường lối của Đảng", "Đối lập nhiệm vụ kinh tế- xã hội và quốc phòng - an ninh", "Đối lập Chủ nghĩa Mác - Lênin và tư tưởng Hồ Chí Minh"], answer: 0 },
            { question: "Thực hiện thủ đoạn “Diễn biến hoà bình” về văn hoá, kẻ thù tập trung tấn công:", options: ["Vào truyền thống yêu nước và giá trị của văn hoá Việt Nam", "Vào những sản phẩm văn hoá quý báu của dân tộc Việt Nam", "Vào bản sắc văn hoá và giá trị văn hoá của dân tộc Việt Nam", "Vào nền văn hoá mang bản sắc dân tộc Việt Nam"], answer: 2 },
            { question: "Trong quá trình bạo loạn, bọn phản động tìm mọi cách để:", options: ["Mở rộng quy mô, lực lượng, kêu gọi nước ngoài can thiệp.", "Mở rộng phạm vi, quy mô, lực lượng, kêu gọi tài trợ của nước ngoài.", "Mở rộng phạm vi, quy mô, lực lượng, đập phá trụ sở, uy hiếp chính quyền địa phương.", "Mở rộng phạm vi, quy mô, lực lượng, đập phá trụ sở, lật đổ chính quyền địa phương."], answer: 3 },
            { question: "Chống phá ta về tư tưởng-văn hóa trong chiến lược \"Diễn biến hoà bình\" bạo loạn lật đổ nhằm:", options: ["Xoá bỏ chủ nghĩa Mác - Lê nin và tư tưởng Hồ Chí Minh", "Phá hoại sự đoàn kết của toàn đảng, toàn quân, toàn dân.", "Phá hoại nguyên tắc tập trung dân chủ của Đảng và Nhà nước ta", "Phá hoại, xuyên tạc đường lối đổi mới của Đảng và Nhà nước ta."], answer: 0 },
            { question: "Phòng chống chiến lược \"Diễn biến hoà bình\", bạo loạn lật đổ cần phát huy sức mạnh tổng hợp của:", options: ["Toàn dân dưới sự lãnh đạo của Đảng Cộng sản Việt Nam.", "Toàn dân, toàn quân dưới sự lãnh đạo của Đảng Cộng sản Việt Nam.", "Toàn dân, lực lượng vũ trang dưới sự lãnh đạo của Đảng Cộng sản Việt Nam.", "Toàn dân, của cả hệ thống chính trị dưới sự lãnh đạo của Đảng Cộng sản Việt Nam"], answer: 3 },
            { question: "Kẻ thù thực hiện thủ đoạn diễn biến hoà bình phá hoại kinh tế của ta nhằm:", options: ["Đặt ra các điều kiện để buộc ta phải theo quỹ đạo của chúng.", "Đặt ra các điều kiện và tạo cớ để tiến công quân sự.", "Đặt ra các điều kiện để lật đổ hệ thống chính trị.", "Đặt ra các điều kiện và gây sức ép về chính trị."], answer: 3 },
            { question: "Quan hệ giữa \"Diễn biến hoà bình\" và bạo loạn lật đổ như thế nào?", options: ["Diễn biến hoà bình tạo thời cơ cho bạo loạn lật đổ.", "Diễn biến hoà bình là nguyên nhân của bạo loạn lật đổ.", "Diễn biến hoà bình là quá trình tạo nên những điều kiện, thời cơ cho bạo loạn lật đổ.", "Diễn biến hoà bình là quá trình tạo những điều kiện, thời cơ để kẻ thù tiến hành xâm lược."], answer: 2 },
            { question: "Thủ đoạn \"Diễn biến hoà bình\", kẻ thù triệt để lợi dụng chính sách tự do tôn giáo của Đảng ta để:", options: ["Truyền bá mê tín dị đoan và tư tưởng phản động chống chủ nghĩa xã hội.", "Truyền đạo trái phép nhằm thực hiện âm mưu tôn giáo hoá dân tộc.", "Truyền bá mê tín dị đoan, tập hợp lực lượng để chống phá cách mạng.", "Truyền bá mê tín và tổ chức lực lượng khủng bố."], answer: 1 },
            { question: "Mục đích thủ đoạn chống phá về kinh tế của các thế lực thù địch đối với nước ta là gì?", options: ["Chuyển hoá nền kinh tế Việt Nam, gây sức ép chính trị, cấm viện trợ, chuyển giao công nghệ.", "Ngăn cảm sự giúp đỡ, viện trợ, chuyển giao công nghệ của các nước để gây sức ép chính trị.", "Khích lệ kinh tế nhà nước phát triển trở thành thành phần kinh tế chủ đạo.", "Chuyển hoá nền kinh tế Việt Nam theo quỹ đạo kinh tế thị trường tư bản chủ nghĩa."], answer: 3 },
            { question: "Nguyên tắc xử lí khi có bạo loạn diễn ra là:", options: ["Nhanh gọn, kiên quyết, linh hoạt, đúng đối tượng, không để lan rộng, kéo dài.", "Nhanh gọn, kiên quyết, triệt để đúng đối tượng, không để lan rộng, kéo dài.", "Nhanh gọn, linh hoạt, khôn khéo đúng đối tượng, không để lan rộng, kéo dài.", "Nhanh gọn, kiên quyết, linh hoạt, mềm dẻo đúng đối tượng, không để lan rộng, kéo dài."], answer: 0 },
            { question: "Để góp phần làm thất bại chiến lược \"Diễn biến hoà bình\", bạo loạn lật đổ cần nắm vững một trong những mục tiêu?", options: ["Bảo vệ sự nghiệp công nghiệp hoá, hiện đại hóa đất nước.", "Bảo vệ tính mạng và tài sản của nhân dân.", "Bảo vệ sự nghiệp đổi mới và lợi ích quốc gia, dân tộc.", "Bảo vệ An ninh Chính trị của đất nước."], answer: 2 },
            { question: "Các thế lực thù địch \"Lợi dụng vấn đề tôn giáo - dân tộc\" để chống phá ta như thế nào?", options: ["Lợi dụng chính sách bình đẳng, tự do dân chủ của ta", "Lợi dụng chính sách tự do tôn giáo của Đảng, Nhà nước ta để truyền đạo trái phép.", "Lợi dụng những sai sót, sơ hở của Đảng và nhà nước ta để vu cáo.", "Triệt để lợi dụng, dân chủ, tự do của ta để tuyên truyền xuyên tạc."], answer: 1 },
            { question: "Học sinh cần làm gì để góp phần làm thất bại chiến lược \"Diễn biến hoà bình\", bạo loạn lật đổ của kẻ thù:", options: ["Luôn học tập phấn đấu, nâng cao cảnh giác tự bảo vệ mình, bảo vệ nơi mình cư trú.", "Luôn nâng cao cảnh giác tích cực tham gia các hoạt động phong trào ở nhà trường và địa phương.", "Tích cực học tập, rèn luyện, nâng cao tinh thần cảnh giác cách mạng, phát hiện, đấu tranh, ngăn ngừa", "Tích cực học tập, rèn luyện tham gia xây dựng thế trận quốc phòng, an ninh nhân dân trong mọi tình huống."], answer: 2 },
            { question: "Đối với công tác công an, phong trào toàn dân bảo vệ an ninh Tổ quốc có tác dụng:", options: ["Huy động sức mạnh của nhân dân để phòng ngừa phát hiện, ngăn chặn đấu tranh với các loại tội phạm.", "Bảo vệ an ninh chính trị giữ gìn an toàn xã hội.", "Trực tiếp trong phòng ngừa, đấu tranh chống tội phạm, ngăn ngừa làm giảm tai nạn, đấu tranh đẩy lùi tệ nạn xã hội và các hiện tượng tiêu cực trong đời sống xã hội.", "Gắn với cuộc vận động lớn của Đảng, Nhà nước."], answer: 2 },
            { question: "Một trong những nội dung chống phá về kinh tế của chiến lược \"Diễn biến hoà bình\":", options: ["Khích lệ thành phần kinh tế tư nhân phát triển, từng bước làm mất vai trò chủ đạo của thành phần kinh tế Nhà nước.", "Khích lệ kinh tế 100% vốn nước ngoài phát triển, làm mất vai trò chủ đạo của thành phần kinh tế Nhà nước.", "Khích lệ kinh tế cá thể, tiểu chủ phát triển, làm mất vai trò chủ đạo của thành phần kinh tế Nhà nước.", "Khích lệ kinh tế tư bản Nhà nước phát triển, làm mất vai trò chủ đạo của thành phần kinh tế Nhà nước."], answer: 0 },
            { question: " \"Diễn biến hoà bình\" là chiến lược cơ bản do", options: ["chủ nghĩa dân tộc và các thế lực phản động tiến hành.", "chủ nghĩa tư bản và các thế lực phản động tiến hành.", "chủ nghĩa đế quốc và các thế lực phản động tiến hành.", "xã hội chủ nghĩa và các thế lực phản động tiến hành."], answer: 2 },
            { question: "Nhiệm vụ phòng chống chiến lược \"Diễn biến hoà bình\", bạo loạn lật đổ được xác định là:", options: ["Nhiệm vụ cấp bách hàng đầu và là nhiệm vụ thường xuyên, lâu dài.", "Nhiệm vụ chủ yếu trước mắt trong các nhiệm vụ Quốc phòng - An ninh ở nước ta hiện nay.", "Nhiệm vụ cơ bản lâu dài trong các nhiệm vụ Quốc phòng - An ninh ở nước ta hiện nay.", "Nhiệm vụ trọng tâm hàng đầu và là nhiệm vụ thường xuyên, lâu dài."], answer: 3 },
            { question: "Mục tiêu của các thế lực thù địch thực hiện \"Diễn biến hoà bình\" chống phá cách mạng Việt Nam là gì?", options: ["Xóa bỏ chế độ XHCN, chuyển hoá nước ta theo con đường tư bản chủ nghĩa.", "Xoá bỏ sự lãnh đạo của Đảng và buộc ta lệ thuộc vào chúng.", "Xoá bỏ vai trò lãnh đạo của Đảng, xoá bỏ chế độ XHCN.", "Xoá bỏ nhà nước XHCN và buộc ta chấp nhận các điều kiện của chúng."], answer: 0 }
        ];

        // 2. LẤY CÁC PHẦN TỬ HTML
        const progressText = document.getElementById('progress-text');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const feedback = document.getElementById('feedback');
        
        const questionContainer = document.getElementById('question-container');
        const completionScreen = document.getElementById('completion-screen');
        const restartBtn = document.getElementById('restart-btn');

        // 3. BIẾN TRẠNG THÁI
        let shuffledQuestions = [];
        let currentQuestionIndex = 0;
        let selecting = true; // Cho phép chọn (true) hay không (false - khi đang chờ next câu)

        // 4. HÀM BẮT ĐẦU QUIZ
        function startQuiz() {
            // "Đảo lộn câu hỏi"
            shuffledQuestions = quizData.sort(() => Math.random() - 0.5);
            currentQuestionIndex = 0;
            selecting = true;
            
            // Hiển thị lại khung câu hỏi và ẩn màn hình hoàn thành
            questionContainer.style.display = 'block';
            completionScreen.style.display = 'none';
            
            loadQuestion();
        }

        // 5. HÀM TẢI CÂU HỎI
        function loadQuestion() {
            selecting = true; // Cho phép chọn lại
            clearPreviousState();
            
            const currentQuestion = shuffledQuestions[currentQuestionIndex];
            
            // Hiển thị "Câu X / 20"
            progressText.innerText = `Câu ${currentQuestionIndex + 1} / ${quizData.length}`;
            
            // Hiển thị nội dung câu hỏi
            questionText.innerText = currentQuestion.question;
            
            // Tạo các lựa chọn
            currentQuestion.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.classList.add('option');
                optionElement.innerText = option;
                
                // Gán sự kiện click
                optionElement.addEventListener('click', () => selectAnswer(optionElement, index));
                
                optionsContainer.appendChild(optionElement);
            });
        }

        // 6. HÀM XỬ LÝ KHI CHỌN CÂU TRẢ LỜI
        function selectAnswer(selectedOption, selectedIndex) {
            if (!selecting) return; // Nếu đang chờ next, không cho bấm
            
            const correctIndex = shuffledQuestions[currentQuestionIndex].answer;

            // Xóa các thông báo "sai" trước đó
            Array.from(optionsContainer.children).forEach(opt => opt.classList.remove('incorrect'));
            feedback.innerText = "";
            feedback.style.color = 'red';

            if (selectedIndex === correctIndex) {
                // *** XỬ LÝ KHI ĐÚNG (Xanh, Next) ***
                selecting = false; // Khóa lựa chọn
                selectedOption.classList.add('correct');
                feedback.innerText = "Chính xác!";
                feedback.style.color = 'green';
                
                // Tự động chuyển sang câu tiếp theo sau 1 giây
                setTimeout(() => {
                    currentQuestionIndex++;
                    if (currentQuestionIndex < shuffledQuestions.length) {
                        loadQuestion();
                    } else {
                        showCompletionScreen();
                    }
                }, 1000);

            } else {
                // *** XỬ LÝ KHI SAI (Đỏ, Báo lỗi) ***
                selectedOption.classList.add('incorrect');
                feedback.innerText = "Sai rồi! Vui lòng chọn lại.";
            }
        }

        // 7. HÀM DỌN DẸP TRẠNG THÁI CŨ
        function clearPreviousState() {
            feedback.innerText = "";
            while (optionsContainer.firstChild) {
                optionsContainer.removeChild(optionsContainer.firstChild);
            }
        }
        
        // 8. HÀM HIỂN THỊ MÀN HÌNH HOÀN THÀNH
        function showCompletionScreen() {
            questionContainer.style.display = 'none';
            completionScreen.style.display = 'block';
            progressText.innerText = 'Hoàn thành';
        }

        // 9. GÁN NÚT LÀM LẠI
        restartBtn.addEventListener('click', startQuiz);

        // 10. BẮT ĐẦU KHI TẢI TRANG
        startQuiz();

    </script>
</body>
</html>
